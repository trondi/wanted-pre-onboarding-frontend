(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{14:function(t,e,o){t.exports={auth:"AuthForm_auth__MPw6W",control:"AuthForm_control__2fVSU",actions:"AuthForm_actions__1VNhY",toggle:"AuthForm_toggle__21tnB"}},20:function(t,e,o){t.exports={header:"MainNavigation_header__2lqQ1",logo:"MainNavigation_logo__1TgMx"}},36:function(t,e,o){},48:function(t,e,o){},49:function(t,e,o){"use strict";o.r(e);var n=o(23),c=o.n(n),s=o(10),i=o(6),a=o(2),l=o.n(a),r=o(1),d=l.a.createContext({token:"",isLoggedIn:!1,login:function(t){},logout:function(){}}),j=function(t){var e=localStorage.getItem("token"),o=Object(a.useState)(e),n=Object(i.a)(o,2),c=n[0],s=n[1],l={token:c,isLoggedIn:!!c,login:function(t){s(t),localStorage.setItem("token",t)},logout:function(){s(null),localStorage.removeItem("token")}};return Object(r.jsx)(d.Provider,{value:l,children:t.children})},u=d,b=(o(36),o(4)),h=o(20),O=o.n(h),p=function(){var t=Object(a.useContext)(u),e=t.isLoggedIn;return Object(r.jsxs)("header",{className:O.a.header,children:[Object(r.jsx)(s.b,{to:"/",children:Object(r.jsx)("div",{className:O.a.logo,children:"React Assignment"})}),Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[!e&&Object(r.jsx)("li",{children:Object(r.jsx)(s.b,{to:"/auth",children:"Login"})}),e&&Object(r.jsx)("li",{children:Object(r.jsx)(s.b,{to:"/todos",children:"Todos"})}),e&&Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(){t.logout()},children:"Logout"})})]})})]})},x=function(t){return Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)(p,{}),Object(r.jsx)("main",{children:t.children})]})},m=o(14),g=o.n(m),f=o(51),_=function(){var t=Object(b.g)(),e=Object(a.useRef)(),o=Object(a.useRef)();Object(a.useEffect)((function(){}),[e,o]);var n=Object(a.useContext)(u),c=Object(a.useState)(!0),s=Object(i.a)(c,2),l=s[0],d=s[1],j=Object(a.useState)(!1),h=Object(i.a)(j,2),O=h[0],p=h[1];return Object(r.jsxs)("section",{className:g.a.auth,children:[Object(r.jsx)("h1",{children:l?"Login":"Sign Up"}),Object(r.jsxs)("form",{onSubmit:function(c){c.preventDefault();var s=e.current.value,i=o.current.value;p(!0);var a="https://pre-onboarding-selection-task.shop";a="".concat(a,l?"/auth/signin":"/auth/signup"),Object(f.a)({method:"POST",url:a,data:{email:s,password:i}}).then((function(t){return p(!1),t.data.access_token?(console.log("data",t.data),t):function(t){var e="Authrntication failed!";throw t&&t.error&&t.error.message&&(e=t.error.message),new Error(e)}})).then((function(e){n.login(e.data.access_token),console.log("res",e),console.log("res.data",e.data),console.log("acc_t",e.data.access_token),t.replace("/todos")})).catch((function(t){throw console.log(t),alert(t.message),p(!1),new Error(t)}))},children:[Object(r.jsxs)("div",{className:g.a.control,children:[Object(r.jsx)("label",{htmlFor:"email",children:"Email"}),Object(r.jsx)("input",{type:"email",id:"email",required:!0,ref:e,onChange:function(t){var e;null!==(e=t.current)&&void 0!==e&&e.value.includes("@")||console.log("\uc774\uba54\uc77c\uc740 @\uac00 \ud3ec\ud568\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4.")}})]}),Object(r.jsxs)("div",{className:g.a.control,children:[Object(r.jsx)("label",{htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{type:"password",id:"password",required:!0,ref:o,onChange:function(t){var e;(null===(e=t.current)||void 0===e?void 0:e.value.length)<8&&console.log("\ube44\ubc00\ubc88\ud638\ub294 8\uc790\ub9ac \uc774\uc0c1\uc774\uc5ec\uc57c \ud569\ub2c8\ub2e4.")}})]}),Object(r.jsxs)("div",{className:g.a.actions,children:[!O&&Object(r.jsx)("button",{children:l?"\ub85c\uadf8\uc778":"\ud68c\uc6d0\uac00\uc785"}),O&&Object(r.jsx)("p",{children:"Sending Request..."}),Object(r.jsx)("button",{type:"button",className:g.a.toggle,onClick:function(){d((function(t){return!t}))},children:l?"Create new account":"Login with existing account"})]})]})]})},v=function(){return Object(r.jsx)(_,{})},L=function(t){var e=t.todoList,o=t.setTodoList,n=Object(a.useState)(""),c=Object(i.a)(n,2),s=c[0],l=c[1],d=Object(a.useRef)(null),j=function(){var t=e.concat({id:e.length,todo:s,isCompleted:!1,deleted:!1});o(t),l(""),d.current.focus()};return Object(a.useEffect)((function(){console.log(e)}),[e]),Object(r.jsxs)("div",{className:"todoapp__inputbox",children:[Object(r.jsx)("input",{type:"text",name:"todoItem",value:s,ref:d,placeholder:"\ud560 \uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",className:"todoapp__inputbox-inp",onChange:function(t){l(t.target.value)},onKeyDown:function(t){"Enter"===t.key&&j()}}),Object(r.jsx)("button",{type:"submit",className:"todoapp__inputbox-add-btn",onClick:j,children:"\ucd94\uac00"})]})},k=(o(48),o(13)),C=function(t){var e=t.todoItem,o=t.todoList,n=t.setTodoList,c=Object(a.useState)(!1),s=Object(i.a)(c,2),l=s[0],d=s[1],j=Object(a.useState)(e.todo),u=Object(i.a)(j,2),b=u[0],h=u[1],O=Object(a.useRef)(null);Object(a.useEffect)((function(){l&&O.current.focus()}),[l]);return Object(r.jsxs)("li",{className:"todoapp__item",children:[Object(r.jsx)("input",{type:"checkbox",className:"todoapp__item-checkbox",checked:e.isCompleted,onChange:function(){var t=o.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{isCompleted:t.id===e.id?!t.isCompleted:t.isCompleted})}));n(t)}}),l?Object(r.jsx)("input",{type:"text",className:"todoapp__item-edit-input",value:b,ref:O,onChange:function(t){h(t.target.value)}}):Object(r.jsx)("span",{className:"todoapp__item-ctx ".concat(e.isCompleted?"todoapp__item-ctx-checked":""),children:e.todo}),e.isCompleted?null:l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{type:"button",className:"todoapp__item-edit-btn",onClick:function(){var t=o.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{todo:t.id===e.id?b:t.todo})}));n(t),d(!1)},children:"Save"}),Object(r.jsx)("button",{type:"button",className:"todoapp__item-cancel-btn",onClick:function(){d(!1),h(o.item.todo)},children:"Cancel"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{type:"button",className:"todoapp__item-edit-btn",onClick:function(){d(!0)},children:"Edit"}),Object(r.jsx)("button",{type:"button",className:"todoapp__item-delete-btn",onClick:function(){if(window.confirm("Delete it?")){var t=o.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{deleted:t.id===e.id||t.deleted})}));n(t)}},children:"Del"})]})]})},N=function(t){var e=t.title,o=t.todoList,n=t.setTodoList,c=t.checkedList;return Object(r.jsxs)("div",{className:"todoapp__list",children:[Object(r.jsx)("p",{className:"todoapp__list-tit",children:e}),Object(r.jsx)("ul",{className:"todoapp__list-ul",children:o&&o.map((function(t){return t.deleted||c!==t.isCompleted?null:Object(r.jsx)(C,{todoItem:t,todoList:o,setTodoList:n},t.id)}))})]})},w=function(){var t=Object(a.useState)([]),e=Object(i.a)(t,2),o=e[0],n=e[1];return Object(r.jsxs)("div",{className:"homepage__container",children:[Object(r.jsx)("h1",{children:"Todo List"}),Object(r.jsx)(L,{todoList:o,setTodoList:n}),Object(r.jsx)(N,{title:"Todo",todoList:o,setTodoList:n,checkedList:!1}),Object(r.jsx)(N,{title:"Done",todoList:o,setTodoList:n,checkedList:!0})]})};var S=function(){var t=Object(a.useContext)(u);return Object(r.jsx)(x,{children:Object(r.jsxs)(b.d,{children:[Object(r.jsx)(b.b,{path:"/",exact:!0,children:Object(r.jsx)(v,{})}),!t.isLoggedIn&&Object(r.jsx)(b.b,{path:"/auth",children:Object(r.jsx)(v,{})}),Object(r.jsxs)(b.b,{path:"/todos",children:[t.isLoggedIn&&Object(r.jsx)(w,{}),!t.isLoggedIn&&Object(r.jsx)(b.a,{to:"auth"})]}),Object(r.jsx)(b.b,{path:"*",children:Object(r.jsx)(b.a,{to:"/"})})]})})};c.a.createRoot(document.getElementById("root")).render(Object(r.jsx)(j,{children:Object(r.jsx)(s.a,{children:Object(r.jsx)(S,{})})}))}},[[49,1,2]]]);
//# sourceMappingURL=main.3301cae9.chunk.js.map